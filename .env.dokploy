# =============================================================================
# Dokploy Production Environment Configuration
# Copy to .env and fill in your production values for Dokploy deployment
# =============================================================================

# =============================================================================
# Docker Configuration
# =============================================================================
DOCKER_TARGET=production
DOCKERFILE=Dockerfile

# Volume Configuration (use production volumes)
DB_VOLUME_NAME=postgres_data
REDIS_VOLUME_NAME=redis_data
STATIC_VOLUME_NAME=static_volume
MEDIA_VOLUME_NAME=media_volume
NETWORK_NAME=kni_webapp_network

# Mount Configuration (use Dokploy files structure)
MOUNT_BACKUPS=../files/backups

# =============================================================================
# Port Configuration (no exposed ports for Dokploy reverse proxy)
# =============================================================================
# WEB_EXPOSE_PORT=  # Leave empty for production (uses expose instead)
# DATABASE_EXPOSE_PORT=  # Leave empty for production security
# REDIS_EXPOSE_PORT=  # Leave empty for production security

# =============================================================================
# REQUIRED: Dokploy Domain Configuration
# =============================================================================
PRIMARY_DOMAIN=jcleemannbyg.dk
COMPOSE_PROJECT_NAME=kni-webapp

# =============================================================================
# REQUIRED: Security Configuration
# =============================================================================
DJANGO_SECRET_KEY=your-super-secret-key-here-make-it-long-and-random-50-chars
DATABASE_PASSWORD=your_secure_production_password
REDIS_PASSWORD=your_secure_redis_password

# =============================================================================
# Django Core Settings
# =============================================================================
DEBUG=False
ALLOWED_HOSTS=jcleemannbyg.dk,www.jcleemannbyg.dk,kni.dk,www.kni.dk
CSRF_TRUSTED_ORIGINS=https://jcleemannbyg.dk,https://www.jcleemannbyg.dk,https://kni.dk

# =============================================================================
# Database Configuration
# =============================================================================
# Dokploy internal service name format: appname-servicename-randomid
DATABASE_URL=postgresql://kni_user:your_secure_production_password@jcleemannbyg-knipostgres-pbmqo1:5432/kni_webapp_prod
DATABASE_NAME=kni_webapp_prod
DATABASE_USER=kni_user
DATABASE_AUTH_METHOD=md5

# =============================================================================
# Application Configuration
# =============================================================================
WAGTAILADMIN_BASE_URL=https://jcleemannbyg.dk
SECURE_SSL_REDIRECT=True

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@jcleemannbyg.dk

# =============================================================================
# Performance Settings (Using hardcoded defaults in supervisord.conf)
# =============================================================================
# Gunicorn settings are configured directly in supervisord.conf:
# - Workers: 2
# - Timeout: 60s
# - Max requests: 1000
# - Worker class: sync

# =============================================================================
# Resource Limits (Optional)
# =============================================================================
MEMORY_LIMIT=1G
CPU_LIMIT=1.0
MEMORY_RESERVATION=512M
CPU_RESERVATION=0.5

# =============================================================================
# Data Management
# =============================================================================
LOAD_BASELINE=false
SEED_TENANT_DATA=false

# =============================================================================
# Security Settings
# =============================================================================
DJANGO_SECURE_HSTS_SECONDS=31536000
DJANGO_SECURE_HSTS_INCLUDE_SUBDOMAINS=True
DJANGO_SECURE_HSTS_PRELOAD=True

# =============================================================================
# Multi-tenant Configuration (if needed)
# =============================================================================
# TENANT_SCHEMA=your_tenant
# TENANT_HOSTNAME=tenant.your-domain.com
# TENANT_ADMIN_USER=admin
# TENANT_ADMIN_PASSWORD=secure-admin-password
# TENANT_ADMIN_EMAIL=admin@your-domain.com

# =============================================================================
# Production Admin User (Optional - only for initial setup)
# =============================================================================
DJANGO_SUPERUSER_EMAIL=admin@jcleemannbyg.dk
DJANGO_SUPERUSER_PASSWORD=your_secure_admin_password

# =============================================================================
# Health Check Configuration (production timings)
# =============================================================================
DB_HEALTH_INTERVAL=10s
DB_HEALTH_TIMEOUT=5s
DB_HEALTH_START_PERIOD=10s

REDIS_HEALTH_INTERVAL=10s
REDIS_HEALTH_TIMEOUT=5s
REDIS_HEALTH_START_PERIOD=5s

WEB_HEALTH_INTERVAL=30s
WEB_HEALTH_TIMEOUT=10s
WEB_HEALTH_START_PERIOD=120s
HEALTHCHECK_COMMAND=["CMD", "python", "manage.py", "check", "--deploy"]

# =============================================================================
# Dokploy/Traefik Labels
# =============================================================================
TRAEFIK_ENABLED=true

# =============================================================================
# Development Command Override (empty for production)
# =============================================================================
# DEVELOPMENT_COMMAND=  # Leave empty for production

# =============================================================================
# Logging
# =============================================================================
DJANGO_LOG_LEVEL=INFO

# =============================================================================
# Optional Cloud Storage (uncomment if using AWS S3)
# =============================================================================
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_STORAGE_BUCKET_NAME=your-s3-bucket
# AWS_S3_REGION_NAME=us-east-1
# USE_S3_STORAGE=True